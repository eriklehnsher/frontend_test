{"remainingRequest":"F:\\HANOICAR_frontend\\node_modules\\babel-loader\\lib\\index.js!F:\\HANOICAR_frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!F:\\HANOICAR_frontend\\src\\libs\\axiosConfig.js","dependencies":[{"path":"F:\\HANOICAR_frontend\\src\\libs\\axiosConfig.js","mtime":1672052069868},{"path":"F:\\HANOICAR_frontend\\babel.config.js","mtime":1672052069788},{"path":"F:\\HANOICAR_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1672052217027},{"path":"F:\\HANOICAR_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1672052221302},{"path":"F:\\HANOICAR_frontend\\node_modules\\eslint-loader\\index.js","mtime":1672052216173}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IHN0b3JlIH0gZnJvbSAiLi4vc3RvcmUiOwppbXBvcnQgeyBBVVRIX0xPR09VVCB9IGZyb20gIkAvc3RvcmUvY29uc3RhbnRzIjsgLy8gZXhwb3J0IGRlZmF1bHQgYXhpb3M7Cgp2YXIgYXhpb3NJbnMgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFDS0VORF9VUkwsCiAgdGltZW91dDogNTAwMDAKfSk7CmF4aW9zSW5zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiQVVUSCBUT0tFTiI7CmF4aW9zSW5zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiI7CmF4aW9zSW5zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHRva2VuID0gc3RvcmUuc3RhdGUudG9rZW47CgogIGlmICh0b2tlbiAhPSAiIikgewogICAgY29uZmlnLmhlYWRlcnNbIkF1dGhvcml6YXRpb24iXSA9ICJCZWFyZXIgIiArIHRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coInJlcXVlc3QgZXJyb3IiLCBlcnJvcik7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmF4aW9zSW5zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICB2YXIgc3RhdHVzID0gZXJyb3IucmVzcG9uc2UgPyBlcnJvci5yZXNwb25zZS5zdGF0dXMgOiA1MDA7CgogIHN3aXRjaCAoc3RhdHVzKSB7CiAgICBjYXNlIDQwMToKICAgICAgewogICAgICAgIHZhciB0b2tlbiA9IHN0b3JlLnN0YXRlLnRva2VuOwoKICAgICAgICBpZiAodG9rZW4gIT0gIiIpIHsKICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKEFVVEhfTE9HT1VUKTsKICAgICAgICB9CgogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICIvIy9sb2dpbiI7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfQoKICAgIGNhc2UgNDA0OgogICAgICB7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgIi8jL05vdEZvdW5kIjsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICB9CgogICAgY2FzZSA1MDM6CiAgICAgIHsKICAgICAgICBhbGVydCgic2VydmljZSB1bmF2YWlsYWJsZSwgdHJ5IGFnYWluIGxhdGVyIik7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfQoKICAgIGNhc2UgNDA4OgogICAgICB7CiAgICAgICAgYWxlcnQoImxpbmsgZXhwaXJlZCIpOwogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICIvIy9sb2dpbiI7CiAgICAgIH0KICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9Cn0pOwpleHBvcnQgZGVmYXVsdCBheGlvc0luczs="},{"version":3,"sources":["F:/HANOICAR_frontend/src/libs/axiosConfig.js"],"names":["axios","store","AUTH_LOGOUT","axiosIns","create","baseURL","process","env","VUE_APP_BACKEND_URL","timeout","defaults","headers","common","post","interceptors","request","use","config","token","state","error","console","log","Promise","reject","response","status","dispatch","window","location","href","origin","alert"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,UAAtB;AACA,SAASC,WAAT,QAA4B,mBAA5B,C,CACA;;AAEA,IAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADO;AAE5BC,EAAAA,OAAO,EAAE;AAFmB,CAAb,CAAjB;AAKAN,QAAQ,CAACO,QAAT,CAAkBC,OAAlB,CAA0BC,MAA1B,CAAiC,eAAjC,IAAoD,YAApD;AACAT,QAAQ,CAACO,QAAT,CAAkBC,OAAlB,CAA0BE,IAA1B,CAA+B,cAA/B,IAAiD,kBAAjD;AAEAV,QAAQ,CAACW,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACE,UAACC,MAAD,EAAY;AACV,MAAMC,KAAK,GAAGjB,KAAK,CAACkB,KAAN,CAAYD,KAA1B;;AACA,MAAIA,KAAK,IAAI,EAAb,EAAiB;AACfD,IAAAA,MAAM,CAACN,OAAP,CAAe,eAAf,IAAkC,YAAYO,KAA9C;AACD;;AACD,SAAOD,MAAP;AACD,CAPH,EAQE,UAACG,KAAD,EAAW;AACTC,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,KAA7B;AACA,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAXH;AAcAjB,QAAQ,CAACW,YAAT,CAAsBW,QAAtB,CAA+BT,GAA/B,CACE,UAACS,QAAD,EAAc;AACZ,SAAOA,QAAP;AACD,CAHH,EAIE,UAACL,KAAD,EAAW;AACT,MAAMM,MAAM,GAAGN,KAAK,CAACK,QAAN,GAAiBL,KAAK,CAACK,QAAN,CAAeC,MAAhC,GAAyC,GAAxD;;AACA,UAAQA,MAAR;AACE,SAAK,GAAL;AAAU;AACR,YAAMR,KAAK,GAAGjB,KAAK,CAACkB,KAAN,CAAYD,KAA1B;;AACA,YAAIA,KAAK,IAAI,EAAb,EAAiB;AACfjB,UAAAA,KAAK,CAAC0B,QAAN,CAAezB,WAAf;AACD;;AACD0B,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBF,MAAM,CAACC,QAAP,CAAgBE,MAAhB,GAAyB,UAAhD;AACA,eAAOR,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD;;AACD,SAAK,GAAL;AAAU;AACRQ,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBF,MAAM,CAACC,QAAP,CAAgBE,MAAhB,GAAyB,aAAhD;AACA,eAAOR,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD;;AACD,SAAK,GAAL;AAAU;AACRY,QAAAA,KAAK,CAAC,sCAAD,CAAL;AACA,eAAOT,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD;;AACD,SAAK,GAAL;AAAU;AACRY,QAAAA,KAAK,CAAC,cAAD,CAAL;AACAJ,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBF,MAAM,CAACC,QAAP,CAAgBE,MAAhB,GAAyB,UAAhD;AACD;AACD;;AACA;AACE,aAAOR,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AAvBJ;AAyBD,CA/BH;AAkCA,eAAejB,QAAf","sourcesContent":["import axios from \"axios\";\r\nimport { store } from \"../store\";\r\nimport { AUTH_LOGOUT } from \"@/store/constants\";\r\n// export default axios;\r\n\r\nconst axiosIns = axios.create({\r\n  baseURL: process.env.VUE_APP_BACKEND_URL,\r\n  timeout: 50000,\r\n});\r\n\r\naxiosIns.defaults.headers.common[\"Authorization\"] = \"AUTH TOKEN\";\r\naxiosIns.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\n\r\naxiosIns.interceptors.request.use(\r\n  (config) => {\r\n    const token = store.state.token;\r\n    if (token != \"\") {\r\n      config.headers[\"Authorization\"] = \"Bearer \" + token;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.log(\"request error\", error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxiosIns.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  (error) => {\r\n    const status = error.response ? error.response.status : 500;\r\n    switch (status) {\r\n      case 401: {\r\n        const token = store.state.token;\r\n        if (token != \"\") {\r\n          store.dispatch(AUTH_LOGOUT);\r\n        }\r\n        window.location.href = window.location.origin + \"/#/login\";\r\n        return Promise.reject(error);\r\n      }\r\n      case 404: {\r\n        window.location.href = window.location.origin + \"/#/NotFound\";\r\n        return Promise.reject(error);\r\n      }\r\n      case 503: {\r\n        alert(\"service unavailable, try again later\");\r\n        return Promise.reject(error);\r\n      }\r\n      case 408: {\r\n        alert(\"link expired\");\r\n        window.location.href = window.location.origin + \"/#/login\";\r\n      }\r\n      break;\r\n      default:\r\n        return Promise.reject(error);\r\n    }\r\n  }\r\n);\r\n\r\nexport default axiosIns;\r\n"]}]}